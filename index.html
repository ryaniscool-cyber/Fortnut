<!DOCTYPE html>
<html>
<head>
  <title>P2P Shooter Game</title>
  <style>
    body { margin: 0; background: #111; color: white; font-family: sans-serif; text-align: center; }
    canvas { display: block; margin: auto; background: #222; }
    input { margin: 5px; }
  </style>
</head>
<body>
  <h2>P2P Shooter Game</h2>
  <p>Your ID: <span id="my-id">...</span></p>
  <input id="peer-id" placeholder="Enter other player's ID" />
  <button onclick="connectToPeer()">Connect</button>
  <canvas id="game" width="800" height="600"></canvas>

  <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
  <script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');

    const peer = new Peer();
    let conn;

    const player = { x: 100, y: 100, color: 'lime' };
    const enemy = { x: 300, y: 300, color: 'red' };

    peer.on('open', id => {
      document.getElementById('my-id').textContent = id;
    });

    peer.on('connection', connection => {
      conn = connection;
      setupConnection();
    });

    function connectToPeer() {
      const otherId = document.getElementById('peer-id').value;
      conn = peer.connect(otherId);
      setupConnection();
    }

    function setupConnection() {
      conn.on('data', data => {
        enemy.x = data.x;
        enemy.y = data.y;
      });
    }

    document.addEventListener('keydown', e => {
      const speed = 5;
      if (e.key === 'ArrowUp') player.y -= speed;
      if (e.key === 'ArrowDown') player.y += speed;
      if (e.key === 'ArrowLeft') player.x -= speed;
      if (e.key === 'ArrowRight') player.x += speed;

      if (conn && conn.open) conn.send(player);
    });

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = player.color;
      ctx.fillRect(player.x, player.y, 20, 20);

      ctx.fillStyle = enemy.color;
      ctx.fillRect(enemy.x, enemy.y, 20, 20);

      requestAnimationFrame(draw);
    }
    draw();
  </script>
</body>
</html>
